{"ast":null,"code":"'use strict';\n\nvar _regeneratorRuntime = require(\"/home/thalusa/Documents/ResearchShare-v2/reactrs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _objectSpread = require(\"/home/thalusa/Documents/ResearchShare-v2/reactrs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectSpread2\");\n\nvar _awaitAsyncGenerator = require(\"/home/thalusa/Documents/ResearchShare-v2/reactrs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/awaitAsyncGenerator\");\n\nvar _wrapAsyncGenerator = require(\"/home/thalusa/Documents/ResearchShare-v2/reactrs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/wrapAsyncGenerator\");\n\nvar _asyncIterator = require(\"/home/thalusa/Documents/ResearchShare-v2/reactrs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncIterator\");\n\nvar CID = require('cids');\n\nvar configure = require('../lib/configure');\n\nvar toUrlSearchParams = require('../lib/to-url-search-params');\n\nfunction toPin(type, cid, metadata) {\n  var pin = {\n    type: type,\n    cid: new CID(cid)\n  };\n\n  if (metadata) {\n    pin.metadata = metadata;\n  }\n\n  return pin;\n}\n\nmodule.exports = configure(function (api) {\n  return /*#__PURE__*/function () {\n    var _ls = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var options,\n          res,\n          _iteratorNormalCompletion,\n          _didIteratorError,\n          _iteratorError,\n          _iterator,\n          _step,\n          _value,\n          pin,\n          _i,\n          _Object$keys,\n          cid,\n          _args = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              options = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n\n              if (options.paths) {\n                options.paths = Array.isArray(options.paths) ? options.paths : [options.paths];\n              }\n\n              _context.next = 4;\n              return _awaitAsyncGenerator(api.post('pin/ls', {\n                timeout: options.timeout,\n                signal: options.signal,\n                searchParams: toUrlSearchParams(_objectSpread(_objectSpread({}, options), {}, {\n                  arg: (options.paths || []).map(function (path) {\n                    return \"\".concat(path);\n                  }),\n                  stream: true\n                })),\n                headers: options.headers\n              }));\n\n            case 4:\n              res = _context.sent;\n              _iteratorNormalCompletion = true;\n              _didIteratorError = false;\n              _context.prev = 7;\n              _iterator = _asyncIterator(res.ndjson());\n\n            case 9:\n              _context.next = 11;\n              return _awaitAsyncGenerator(_iterator.next());\n\n            case 11:\n              _step = _context.sent;\n              _iteratorNormalCompletion = _step.done;\n              _context.next = 15;\n              return _awaitAsyncGenerator(_step.value);\n\n            case 15:\n              _value = _context.sent;\n\n              if (_iteratorNormalCompletion) {\n                _context.next = 33;\n                break;\n              }\n\n              pin = _value;\n\n              if (!pin.Keys) {\n                _context.next = 28;\n                break;\n              }\n\n              _i = 0, _Object$keys = Object.keys(pin.Keys);\n\n            case 20:\n              if (!(_i < _Object$keys.length)) {\n                _context.next = 27;\n                break;\n              }\n\n              cid = _Object$keys[_i];\n              _context.next = 24;\n              return toPin(pin.Keys[cid].Type, cid, pin.Keys[cid].Metadata);\n\n            case 24:\n              _i++;\n              _context.next = 20;\n              break;\n\n            case 27:\n              return _context.abrupt(\"return\");\n\n            case 28:\n              _context.next = 30;\n              return toPin(pin.Type, pin.Cid, pin.Metadata);\n\n            case 30:\n              _iteratorNormalCompletion = true;\n              _context.next = 9;\n              break;\n\n            case 33:\n              _context.next = 39;\n              break;\n\n            case 35:\n              _context.prev = 35;\n              _context.t0 = _context[\"catch\"](7);\n              _didIteratorError = true;\n              _iteratorError = _context.t0;\n\n            case 39:\n              _context.prev = 39;\n              _context.prev = 40;\n\n              if (!(!_iteratorNormalCompletion && _iterator.return != null)) {\n                _context.next = 44;\n                break;\n              }\n\n              _context.next = 44;\n              return _awaitAsyncGenerator(_iterator.return());\n\n            case 44:\n              _context.prev = 44;\n\n              if (!_didIteratorError) {\n                _context.next = 47;\n                break;\n              }\n\n              throw _iteratorError;\n\n            case 47:\n              return _context.finish(44);\n\n            case 48:\n              return _context.finish(39);\n\n            case 49:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[7, 35, 39, 49], [40,, 44, 48]]);\n    }));\n\n    function ls() {\n      return _ls.apply(this, arguments);\n    }\n\n    return ls;\n  }();\n});","map":{"version":3,"sources":["/home/thalusa/Documents/ResearchShare-v2/node_modules/ipfs-http-client/src/pin/ls.js"],"names":["CID","require","configure","toUrlSearchParams","toPin","type","cid","metadata","pin","module","exports","api","options","paths","Array","isArray","post","timeout","signal","searchParams","arg","map","path","stream","headers","res","ndjson","Keys","Object","keys","Type","Metadata","Cid","ls"],"mappings":"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","sourcesContent":["'use strict'\n\nconst CID = require('cids')\nconst configure = require('../lib/configure')\nconst toUrlSearchParams = require('../lib/to-url-search-params')\n\nfunction toPin (type, cid, metadata) {\n  const pin = {\n    type,\n    cid: new CID(cid)\n  }\n\n  if (metadata) {\n    pin.metadata = metadata\n  }\n\n  return pin\n}\n\nmodule.exports = configure(api => {\n  return async function * ls (options = {}) {\n    if (options.paths) {\n      options.paths = Array.isArray(options.paths) ? options.paths : [options.paths]\n    }\n\n    const res = await api.post('pin/ls', {\n      timeout: options.timeout,\n      signal: options.signal,\n      searchParams: toUrlSearchParams({\n        ...options,\n        arg: (options.paths || []).map(path => `${path}`),\n        stream: true\n      }),\n      headers: options.headers\n    })\n\n    for await (const pin of res.ndjson()) {\n      if (pin.Keys) { // non-streaming response\n        for (const cid of Object.keys(pin.Keys)) {\n          yield toPin(pin.Keys[cid].Type, cid, pin.Keys[cid].Metadata)\n        }\n        return\n      }\n\n      yield toPin(pin.Type, pin.Cid, pin.Metadata)\n    }\n  }\n})\n"]},"metadata":{},"sourceType":"script"}
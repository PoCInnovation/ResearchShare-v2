{"ast":null,"code":"import _regeneratorRuntime from\"/home/thalusa/Documents/ResearchShare-v2/reactrs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/thalusa/Documents/ResearchShare-v2/reactrs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/thalusa/Documents/ResearchShare-v2/reactrs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncIterator from\"/home/thalusa/Documents/ResearchShare-v2/reactrs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncIterator\";import{useState}from'react';import Button from'@material-ui/core/Button';import useIPFS from'../../utils/Ipfs';import'./ButtonDownload.css';import fileDownload from'js-file-download';import all from'it-all';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ButtonDownload(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),cid=_useState2[0],setCID=_useState2[1];var IPFS=useIPFS();function handleClick(){return _handleClick.apply(this,arguments);}function _handleClick(){_handleClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,_value,file,buffer,data,blob;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(cid!==\"\")){_context.next=39;break;}_iteratorNormalCompletion=true;_didIteratorError=false;_context.prev=3;_iterator=_asyncIterator(IPFS.ls(cid));case 5:_context.next=7;return _iterator.next();case 7:_step=_context.sent;_iteratorNormalCompletion=_step.done;_context.next=11;return _step.value;case 11:_value=_context.sent;if(_iteratorNormalCompletion){_context.next=23;break;}file=_value;buffer=IPFS.cat(file.cid);_context.next=17;return all(buffer);case 17:data=_context.sent;blob=new Blob(data);fileDownload(blob,file.name);case 20:_iteratorNormalCompletion=true;_context.next=5;break;case 23:_context.next=29;break;case 25:_context.prev=25;_context.t0=_context[\"catch\"](3);_didIteratorError=true;_iteratorError=_context.t0;case 29:_context.prev=29;_context.prev=30;if(!(!_iteratorNormalCompletion&&_iterator.return!=null)){_context.next=34;break;}_context.next=34;return _iterator.return();case 34:_context.prev=34;if(!_didIteratorError){_context.next=37;break;}throw _iteratorError;case 37:return _context.finish(34);case 38:return _context.finish(29);case 39:case\"end\":return _context.stop();}}},_callee,null,[[3,25,29,39],[30,,34,38]]);}));return _handleClick.apply(this,arguments);}function changeInput(event){setCID(event.target.value);}return/*#__PURE__*/_jsxs(\"div\",{id:\"download\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"download-input\",onChange:changeInput,type:\"text\",name:\"HashField\"}),/*#__PURE__*/_jsx(Button,{className:\"download-button\",onClick:handleClick,variant:\"contained\",color:\"primary\",children:\"Download\"})]});}","map":{"version":3,"sources":["/home/thalusa/Documents/ResearchShare-v2/reactrs/src/components/ButtonDownload/ButtonDownload.tsx"],"names":["useState","Button","useIPFS","fileDownload","all","ButtonDownload","cid","setCID","IPFS","handleClick","ls","file","buffer","cat","data","blob","Blob","name","changeInput","event","target","value"],"mappings":"ypBAAA,OAAsBA,QAAtB,KAAsC,OAAtC,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CACA,MAAO,sBAAP,CAEA,MAAOC,CAAAA,YAAP,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,GAAP,KAAgB,QAAhB,C,wFAEA,cAAe,SAASC,CAAAA,cAAT,EAA0B,eACfL,QAAQ,CAAC,EAAD,CADO,wCAC9BM,GAD8B,eACzBC,MADyB,eAErC,GAAMC,CAAAA,IAAI,CAAGN,OAAO,EAApB,CAFqC,QAItBO,CAAAA,WAJsB,2IAIrC,oPACQH,GAAG,GAAK,EADhB,2HAEiCE,IAAI,CAACE,EAAL,CAAQJ,GAAR,CAFjC,wOAEyBK,IAFzB,QAGkBC,MAHlB,CAG2BJ,IAAI,CAACK,GAAL,CAASF,IAAI,CAACL,GAAd,CAH3B,wBAI+BF,CAAAA,GAAG,CAACQ,MAAD,CAJlC,SAIkBE,IAJlB,eAKkBC,IALlB,CAKyB,GAAIC,CAAAA,IAAJ,CAASF,IAAT,CALzB,CAMYX,YAAY,CAACY,IAAD,CAAOJ,IAAI,CAACM,IAAZ,CAAZ,CANZ,ymBAJqC,8CAerC,QAASC,CAAAA,WAAT,CAAqBC,KAArB,CAA2D,CACvDZ,MAAM,CAACY,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAN,CACH,CAED,mBACI,aAAK,EAAE,CAAC,UAAR,wBACI,cAAO,SAAS,CAAC,gBAAjB,CAAkC,QAAQ,CAAEH,WAA5C,CAAyD,IAAI,CAAC,MAA9D,CAAqE,IAAI,CAAC,WAA1E,EADJ,cAEI,KAAC,MAAD,EAAQ,SAAS,CAAC,iBAAlB,CAAoC,OAAO,CAAET,WAA7C,CAA0D,OAAO,CAAC,WAAlE,CAA8E,KAAK,CAAC,SAApF,sBAFJ,GADJ,CAQH","sourcesContent":["import { ChangeEvent, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport useIPFS from '../../utils/Ipfs';\nimport './ButtonDownload.css';\n\nimport fileDownload from 'js-file-download';\nimport all from 'it-all';\n\nexport default function ButtonDownload() {\n    const [cid, setCID] = useState(\"\");\n    const IPFS = useIPFS();\n\n    async function handleClick() {\n        if (cid !== \"\") {\n            for await (const file of IPFS.ls(cid)) {\n                const buffer = IPFS.cat(file.cid);\n                const data = await all(buffer);\n                const blob = new Blob(data);\n                fileDownload(blob, file.name);\n            }\n        }\n    }\n\n    function changeInput(event: ChangeEvent<HTMLInputElement>) {\n        setCID(event.target.value);\n    }\n\n    return (\n        <div id=\"download\">\n            <input className=\"download-input\" onChange={changeInput} type=\"text\" name=\"HashField\"/>\n            <Button className=\"download-button\" onClick={handleClick} variant=\"contained\" color=\"primary\">\n                Download\n            </Button>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}
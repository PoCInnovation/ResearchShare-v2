(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Multiaddr = factory()}(typeof self !== 'undefined' ? self : this, function () {
var Multiaddr=(()=>{var xr=Object.defineProperty;var C=(t,e)=>()=>(t&&(e=t(t=0)),e),f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),se=(t,e)=>{for(var r in e)xr(t,r,{get:e[r],enumerable:!0})};var We=f((So,Xe)=>{"use strict";var Ke="[a-fA-F\\d:]",M=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${Ke})|(?<=${Ke})(?=\\s|$))`:"",z="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",b="[a-fA-F\\d]{1,4}",ie=`
(?:
(?:${b}:){7}(?:${b}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${b}:){6}(?:${z}|:${b}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${b}:){5}(?::${z}|(?::${b}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${b}:){4}(?:(?::${b}){0,1}:${z}|(?::${b}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${b}:){3}(?:(?::${b}){0,2}:${z}|(?::${b}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${b}:){2}(?:(?::${b}){0,3}:${z}|(?::${b}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${b}:){1}(?:(?::${b}){0,4}:${z}|(?::${b}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${b}){0,5}:${z}|(?::${b}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Er=new RegExp(`(?:^${z}$)|(?:^${ie}$)`),Ar=new RegExp(`^${z}$`),Sr=new RegExp(`^${ie}$`),Ee=t=>t&&t.exact?Er:new RegExp(`(?:${M(t)}${z}${M(t)})|(?:${M(t)}${ie}${M(t)})`,"g");Ee.v4=t=>t&&t.exact?Ar:new RegExp(`${M(t)}${z}${M(t)}`,"g");Ee.v6=t=>t&&t.exact?Sr:new RegExp(`${M(t)}${ie}${M(t)}`,"g");Xe.exports=Ee});var Ye=f((To,Ze)=>{"use strict";var Ae=We(),R=t=>Ae({exact:!0}).test(t);R.v4=t=>Ae.v4({exact:!0}).test(t);R.v6=t=>Ae.v6({exact:!0}).test(t);R.version=t=>R(t)?R.v4(t)?4:6:void 0;Ze.exports=R});var _e=f(($o,He)=>{"use strict";function Tr(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var o=t.charAt(n),s=o.charCodeAt(0);if(e[s]!==255)throw new TypeError(o+" is ambiguous");e[s]=n}var i=t.length,a=t.charAt(0),E=Math.log(i)/Math.log(256),A=Math.log(256)/Math.log(i);function D(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";for(var d=0,S=0,l=0,p=c.length;l!==p&&c[l]===0;)l++,d++;for(var w=(p-l)*A+1>>>0,u=new Uint8Array(w);l!==p;){for(var g=c[l],v=0,h=w-1;(g!==0||v<S)&&h!==-1;h--,v++)g+=256*u[h]>>>0,u[h]=g%i>>>0,g=g/i>>>0;if(g!==0)throw new Error("Non-zero carry");S=v,l++}for(var y=w-S;y!==w&&u[y]===0;)y++;for(var j=a.repeat(d);y<w;++y)j+=t.charAt(u[y]);return j}function N(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;var d=0;if(c[d]!==" "){for(var S=0,l=0;c[d]===a;)S++,d++;for(var p=(c.length-d)*E+1>>>0,w=new Uint8Array(p);c[d];){var u=e[c.charCodeAt(d)];if(u===255)return;for(var g=0,v=p-1;(u!==0||g<l)&&v!==-1;v--,g++)u+=i*w[v]>>>0,w[v]=u%256>>>0,u=u/256>>>0;if(u!==0)throw new Error("Non-zero carry");l=g,d++}if(c[d]!==" "){for(var h=p-l;h!==p&&w[h]===0;)h++;for(var y=new Uint8Array(S+(p-h)),j=S;h!==p;)y[j++]=w[h++];return y}}}function K(c){var d=N(c);if(d)return d;throw new Error("Non-base"+i+" character")}return{encode:D,decodeUnsafe:N,decode:K}}He.exports=Tr});var ce=f((Uo,et)=>{"use strict";var $r=new TextDecoder,Ur=t=>$r.decode(t),zr=new TextEncoder,qr=t=>zr.encode(t);function Br(t,e){let r=new Uint8Array(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}et.exports={decodeText:Ur,encodeText:qr,concat:Br}});var nt=f((zo,tt)=>{"use strict";var{encodeText:jr}=ce(),rt=class{constructor(e,r,n,o){this.name=e,this.code=r,this.codeBuf=jr(this.code),this.alphabet=o,this.codec=n(o)}encode(e){return this.codec.encode(e)}decode(e){for(let r of e)if(this.alphabet&&this.alphabet.indexOf(r)<0)throw new Error(`invalid character '${r}' in '${e}'`);return this.codec.decode(e)}};tt.exports=rt});var st=f((qo,ot)=>{"use strict";var Cr=(t,e,r)=>{let n={};for(let A=0;A<e.length;++A)n[e[A]]=A;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),i=0,a=0,E=0;for(let A=0;A<o;++A){let D=n[t[A]];if(D===void 0)throw new SyntaxError("Invalid character "+t[A]);a=a<<r|D,i+=r,i>=8&&(i-=8,s[E++]=255&a>>i)}if(i>=r||255&a<<8-i)throw new SyntaxError("Unexpected end of data");return s},Ir=(t,e,r)=>{let n=e[e.length-1]==="=",o=(1<<r)-1,s="",i=0,a=0;for(let E=0;E<t.length;++E)for(a=a<<8|t[E],i+=8;i>r;)i-=r,s+=e[o&a>>i];if(i&&(s+=e[o&a<<r-i]),n)for(;s.length*r&7;)s+="=";return s},Dr=t=>e=>({encode(r){return Ir(r,e,t)},decode(r){return Cr(r,e,t)}});ot.exports={rfc4648:Dr}});var dt=f((Bo,it)=>{"use strict";var W=_e(),Mr=nt(),{rfc4648:m}=st(),{decodeText:Nr,encodeText:Or}=ce(),Rr=()=>({encode:Nr,decode:Or}),ct=[["identity","\0",Rr,""],["base2","0",m(1),"01"],["base8","7",m(3),"01234567"],["base10","9",W,"0123456789"],["base16","f",m(4),"0123456789abcdef"],["base16upper","F",m(4),"0123456789ABCDEF"],["base32hex","v",m(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",m(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",m(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",m(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",m(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",m(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",m(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",m(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",m(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",W,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",W,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",W,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",W,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",m(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",m(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",m(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",m(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],at=ct.reduce((t,e)=>(t[e[0]]=new Mr(e[0],e[1],e[2],e[3]),t),{}),Vr=ct.reduce((t,e)=>(t[e[1]]=at[e[0]],t),{});it.exports={names:at,codes:Vr}});var Se=f((I,ut)=>{"use strict";var V=dt(),{encodeText:Fr,decodeText:ae,concat:lt}=ce();function kr(t,e){if(!e)throw new Error("requires an encoded Uint8Array");let{name:r,codeBuf:n}=O(t);return Lr(r,e),lt([n,e],n.length+e.length)}function Pr(t,e){let r=O(t),n=Fr(r.encode(e));return lt([r.codeBuf,n],r.codeBuf.length+n.length)}function Gr(t){t instanceof Uint8Array&&(t=ae(t));let e=t[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(t=t.toLowerCase()),O(t[0]).decode(t.substring(1))}function Jr(t){if(t instanceof Uint8Array&&(t=ae(t)),Object.prototype.toString.call(t)!=="[object String]")return!1;try{return O(t[0]).name}catch(e){return!1}}function Lr(t,e){O(t).decode(ae(e))}function O(t){if(Object.prototype.hasOwnProperty.call(V.names,t))return V.names[t];if(Object.prototype.hasOwnProperty.call(V.codes,t))return V.codes[t];throw new Error(`Unsupported encoding: ${t}`)}function Qr(t){return t instanceof Uint8Array&&(t=ae(t)),O(t[0])}I=ut.exports=kr;I.encode=Pr;I.decode=Gr;I.isEncoded=Jr;I.encoding=O;I.encodingFromData=Qr;var Xr=Object.freeze(V.names),Kr=Object.freeze(V.codes);I.names=Xr;I.codes=Kr});var Z=f((jo,ht)=>{"use strict";var{encoding:Wr}=Se(),Zr=new TextDecoder("utf8");function Yr(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}function Hr(t,e="utf8"){return e==="utf8"||e==="utf-8"?Zr.decode(t):e==="ascii"?Yr(t):Wr(e).encode(t)}ht.exports=Hr});var bt=f((Co,ft)=>{"use strict";var Te=Ye(),pt=Z(),_r=Te,$e=Te.v4,wt=Te.v6,gt=function(t,e,r){r=~~r;let n;if($e(t))n=e||new Uint8Array(r+4),t.split(/\./g).map(function(o){n[r++]=parseInt(o,10)&255});else if(wt(t)){let o=t.split(":",8),s;for(s=0;s<o.length;s++){let i=$e(o[s]),a;i&&(a=gt(o[s]),o[s]=pt(a.slice(0,2),"base16")),a&&++s<8&&o.splice(s,0,pt(a.slice(2,4),"base16"))}if(o[0]==="")for(;o.length<8;)o.unshift("0");else if(o[o.length-1]==="")for(;o.length<8;)o.push("0");else if(o.length<8){for(s=0;s<o.length&&o[s]!=="";s++);let i=[s,"1"];for(s=9-o.length;s>0;s--)i.push("0");o.splice.apply(o,i)}for(n=e||new Uint8Array(r+16),s=0;s<o.length;s++){let i=parseInt(o[s],16);n[r++]=i>>8&255,n[r++]=i&255}}if(!n)throw Error("Invalid ip address: "+t);return n},en=function(t,e,r){e=~~e,r=r||t.length-e;let n=[],o,s=new DataView(t.buffer);if(r===4){for(let i=0;i<r;i++)n.push(t[e+i]);o=n.join(".")}else if(r===16){for(let i=0;i<r;i+=2)n.push(s.getUint16(e+i).toString(16));o=n.join(":"),o=o.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),o=o.replace(/:{3,4}/,"::")}return o};ft.exports={isIP:_r,isV4:$e,isV6:wt,toBytes:gt,toString:en}});var de=f((Io,yt)=>{"use strict";function $(t){if(typeof t=="number"){if($.codes[t])return $.codes[t];throw new Error("no protocol with code: "+t)}else if(typeof t=="string"){if($.names[t])return $.names[t];throw new Error("no protocol with name: "+t)}throw new Error("invalid protocol id type: "+t)}var U=-1;$.lengthPrefixedVarSize=U;$.V=U;$.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,U,"ip6zone"],[53,U,"dns","resolvable"],[54,U,"dns4","resolvable"],[55,U,"dns6","resolvable"],[56,U,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,U,"unix",!1,"path"],[421,U,"ipfs"],[421,U,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,U,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,U,"memory"]];$.names={};$.codes={};$.table.map(t=>{let e=vt.apply(null,t);return $.codes[e.code]=e,$.names[e.name]=e,null});$.object=vt;function vt(t,e,r,n,o){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(o)}}yt.exports=$});function mt(t,e,r){e=e||[],r=r||0;for(var n=r;t>=on;)e[r++]=t&255|xt,t/=128;for(;t&nn;)e[r++]=t&255|xt,t>>>=7;return e[r]=t|0,mt.bytes=r-n+1,e}function Ue(t,e){var r=0,e=e||0,n=0,o=e,s,i=t.length;do{if(o>=i)throw Ue.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=n<28?(s&Et)<<n:(s&Et)*Math.pow(2,n),n+=7}while(s>=cn);return Ue.bytes=o-e,r}var tn,xt,rn,nn,on,sn,cn,Et,an,dn,un,ln,hn,fn,pn,wn,gn,bn,yn,vn,Y,At=C(()=>{tn=mt,xt=128,rn=127,nn=~rn,on=Math.pow(2,31);sn=Ue,cn=128,Et=127;an=Math.pow(2,7),dn=Math.pow(2,14),un=Math.pow(2,21),ln=Math.pow(2,28),hn=Math.pow(2,35),fn=Math.pow(2,42),pn=Math.pow(2,49),wn=Math.pow(2,56),gn=Math.pow(2,63),bn=function(t){return t<an?1:t<dn?2:t<un?3:t<ln?4:t<hn?5:t<fn?6:t<pn?7:t<wn?8:t<gn?9:10},yn={encode:tn,decode:sn,encodingLength:bn},vn=yn,Y=vn});var H,F,L,ze=C(()=>{At();H=t=>[Y.decode(t),Y.decode.bytes],F=(t,e,r=0)=>(Y.encode(t,e,r),e),L=t=>Y.encodingLength(t)});var Ro,St,k,ue=C(()=>{Ro=new Uint8Array(0),St=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},k=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}});var Tt={};se(Tt,{Digest:()=>P,create:()=>qe,decode:()=>Be,equals:()=>je});var qe,Be,je,P,Ce=C(()=>{ue();ze();qe=(t,e)=>{let r=e.byteLength,n=L(t),o=n+L(r),s=new Uint8Array(o+r);return F(t,s,0),F(r,s,n),s.set(e,o),new P(t,r,e,s)},Be=t=>{let e=k(t),[r,n]=H(e),[o,s]=H(e.subarray(n)),i=e.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new P(r,o,i,e)},je=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&St(t.bytes,e.bytes),P=class{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}}});function mn(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var o=t.charAt(n),s=o.charCodeAt(0);if(e[s]!==255)throw new TypeError(o+" is ambiguous");e[s]=n}var i=t.length,a=t.charAt(0),E=Math.log(i)/Math.log(256),A=Math.log(256)/Math.log(i);function D(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";for(var d=0,S=0,l=0,p=c.length;l!==p&&c[l]===0;)l++,d++;for(var w=(p-l)*A+1>>>0,u=new Uint8Array(w);l!==p;){for(var g=c[l],v=0,h=w-1;(g!==0||v<S)&&h!==-1;h--,v++)g+=256*u[h]>>>0,u[h]=g%i>>>0,g=g/i>>>0;if(g!==0)throw new Error("Non-zero carry");S=v,l++}for(var y=w-S;y!==w&&u[y]===0;)y++;for(var j=a.repeat(d);y<w;++y)j+=t.charAt(u[y]);return j}function N(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;var d=0;if(c[d]!==" "){for(var S=0,l=0;c[d]===a;)S++,d++;for(var p=(c.length-d)*E+1>>>0,w=new Uint8Array(p);c[d];){var u=e[c.charCodeAt(d)];if(u===255)return;for(var g=0,v=p-1;(u!==0||g<l)&&v!==-1;v--,g++)u+=i*w[v]>>>0,w[v]=u%256>>>0,u=u/256>>>0;if(u!==0)throw new Error("Non-zero carry");l=g,d++}if(c[d]!==" "){for(var h=p-l;h!==p&&w[h]===0;)h++;for(var y=new Uint8Array(S+(p-h)),j=S;h!==p;)y[j++]=w[h++];return y}}}function K(c){var d=N(c);if(d)return d;throw new Error("Non-base"+i+" character")}return{encode:D,decodeUnsafe:N,decode:K}}var xn,En,$t,Ut=C(()=>{xn=mn,En=xn,$t=En});var zt,qt,le,Bt,G,he,Ie=C(()=>{zt=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},qt=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){let r={[this.prefix]:this,...e.decoders||{[e.prefix]:e}};return new le(r)}},le=class{constructor(e){this.decoders=e}or(e){let r=e.decoders||{[e.prefix]:e};return new le({...this.decoders,...r})}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Bt=class{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new zt(e,r,n),this.decoder=new qt(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},G=({name:t,prefix:e,encode:r,decode:n,alphabet:o})=>he({name:t,prefix:e,encode:s=>r(s,o),decode:s=>{for(let i of s)if(o.indexOf(i)<0)throw new Error(`invalid ${t} character`);return n(s,o)}}),he=({name:t,prefix:e,encode:r,decode:n})=>new Bt(t,e,r,n)});var De={};se(De,{base58btc:()=>B,base58flickr:()=>An});var jt,B,An,fe=C(()=>{Ut();ue();Ie();jt=t=>{let{encode:e,decode:r}=$t(t);return{encode:e,decode:n=>k(r(n))}},B=he({name:"base58btc",prefix:"z",...jt("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}),An=he({name:"base58flickr",prefix:"Z",...jt("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ")})});var Ct={};se(Ct,{base32:()=>J,base32hex:()=>Tn,base32hexpad:()=>$n,base32pad:()=>Sn,base32z:()=>Un});function _(t,e){t=t.replace(/=/g,"");let r=t.length,n=0,o=0,s=0,i=new Uint8Array(r*5/8|0);for(let a=0;a<r;a++)o=o<<5|e.indexOf(t[a]),n+=5,n>=8&&(i[s++]=o>>>n-8&255,n-=8);return i}function ee(t,e){let r=t.byteLength,n=new Uint8Array(t),o=e.indexOf("=")===e.length-1;o&&(e=e.substring(0,e.length-1));let s=0,i=0,a="";for(let E=0;E<r;E++)for(i=i<<8|n[E],s+=8;s>=5;)a+=e[i>>>s-5&31],s-=5;if(s>0&&(a+=e[i<<5-s&31]),o)for(;a.length%8!=0;)a+="=";return a}var J,Sn,Tn,$n,Un,Me=C(()=>{Ie();J=G({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",encode:ee,decode:_}),Sn=G({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",encode:ee,decode:_}),Tn=G({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",encode:ee,decode:_}),$n=G({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",encode:ee,decode:_}),Un=G({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",encode:ee,decode:_})});var Ne={};se(Ne,{CID:()=>x});var x,zn,qn,Bn,te,jn,It,Dt,pe,we,Dn,Cn,In,Oe=C(()=>{ze();Ce();fe();Me();ue();x=class{constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:we,byteLength:we,code:pe,version:pe,multihash:pe,bytes:pe,_baseCache:we,asCID:we})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==te)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==jn)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return x.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=qe(e,r);return x.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&je(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:o}=this;switch(n){case 0:return qn(r,o,e||B.encoder);default:return Bn(r,o,e||J.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Cn(/^0\.0/,In),!!(e&&(e[Dt]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof x)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:o,bytes:s}=e;return new x(r,n,o,s||It(r,n,o.bytes))}else if(e!=null&&e[Dt]===!0){let{version:r,multihash:n,code:o}=e,s=Be(n);return x.create(r,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==te)throw new Error(`Version 0 CID must use dag-pb (code: ${te}) block encoding`);return new x(e,r,n,n.bytes)}case 1:{let o=It(e,r,n.bytes);return new x(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return x.create(0,te,e)}static createV1(e,r){return x.create(1,e,r)}static decode(e){let[r,n]=x.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=x.inspectBytes(e),n=r.size-r.multihashSize,o=k(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),i=new P(r.multihashCode,r.digestSize,s,o);return[r.version===0?x.createV0(i):x.createV1(r.codec,i),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[N,K]=H(e.subarray(r));return r+=K,N},o=n(),s=te;if(o===18?(o=0,r=0):o===1&&(s=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=r,a=n(),E=n(),A=r+E,D=A-i;return{version:o,codec:s,multihashCode:a,digestSize:E,multihashSize:D,size:A}}static parse(e,r){let[n,o]=zn(e,r),s=x.decode(o);return s._baseCache.set(n,e),s}},zn=(t,e)=>{switch(t[0]){case"Q":{let r=e||B;return[B.prefix,r.decode(`${B.prefix}${t}`)]}case B.prefix:{let r=e||B;return[B.prefix,r.decode(t)]}case J.prefix:{let r=e||J;return[J.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},qn=(t,e,r)=>{let{prefix:n}=r;if(n!==B.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=e.get(n);if(o==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return o},Bn=(t,e,r)=>{let{prefix:n}=r,o=e.get(n);if(o==null){let s=r.encode(t);return e.set(n,s),s}else return o},te=112,jn=18,It=(t,e,r)=>{let n=L(t),o=n+L(e),s=new Uint8Array(o+r.byteLength);return F(t,s,0),F(e,s,n),s.set(r,o),s},Dt=Symbol.for("@ipld/js-cid/CID"),pe={writable:!1,configurable:!1,enumerable:!0},we={writable:!1,enumerable:!1,configurable:!1},Dn="0.0.0-dev",Cn=(t,e)=>{if(t.test(Dn))console.warn(e);else throw new Error(e)},In=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var Ot=f((Ho,Mt)=>{Mt.exports=Re;var Nt=128,Mn=127,Nn=~Mn,On=Math.pow(2,31);function Re(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw Re.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=On;)e[r++]=t&255|Nt,t/=128;for(;t&Nn;)e[r++]=t&255|Nt,t>>>=7;return e[r]=t|0,Re.bytes=r-n+1,e}});var Ft=f((_o,Rt)=>{Rt.exports=Ve;var Rn=128,Vt=127;function Ve(t,e){var r=0,e=e||0,n=0,o=e,s,i=t.length;do{if(o>=i||n>49)throw Ve.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=n<28?(s&Vt)<<n:(s&Vt)*Math.pow(2,n),n+=7}while(s>=Rn);return Ve.bytes=o-e,r}});var kt=f((es,Lt)=>{var Vn=Math.pow(2,7),Fn=Math.pow(2,14),Ln=Math.pow(2,21),kn=Math.pow(2,28),Pn=Math.pow(2,35),Gn=Math.pow(2,42),Jn=Math.pow(2,49),Qn=Math.pow(2,56),Xn=Math.pow(2,63);Lt.exports=function(t){return t<Vn?1:t<Fn?2:t<Ln?3:t<kn?4:t<Pn?5:t<Gn?6:t<Jn?7:t<Qn?8:t<Xn?9:10}});var ge=f((ts,Pt)=>{Pt.exports={encode:Ot(),decode:Ft(),encodingLength:kt()}});var Jt=f((rs,Gt)=>{"use strict";var{encoding:Kn}=Se(),Wn=new TextEncoder;function Zn(t){let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function Yn(t,e="utf8"){return e==="utf8"||e==="utf-8"?Wn.encode(t):e==="ascii"?Zn(t):Kn(e).decode(t)}Gt.exports=Yn});var Fe=f((ns,Qt)=>{"use strict";function Hn(t,e){e||(e=t.reduce((o,s)=>o+s.length,0));let r=new Uint8Array(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}Qt.exports=Hn});var er=f((os,Xt)=>{"use strict";var be=bt(),Kt=de(),{CID:_n}=(Oe(),Ne),{base32:Wt}=(Me(),Ct),{base58btc:eo}=(fe(),De),to=(Ce(),Tt),Q=ge(),ye=Z(),Zt=Jt(),ve=Fe();Xt.exports=re;function re(t,e){return e instanceof Uint8Array?re.toString(t,e):re.toBytes(t,e)}re.toString=function(e,r){switch(Kt(e).code){case 4:case 41:return ro(r);case 6:case 273:case 33:case 132:return Yt(r).toString();case 53:case 54:case 55:case 56:case 400:case 777:return no(r);case 421:return oo(r);case 444:return Ht(r);case 445:return Ht(r);default:return ye(r,"base16")}};re.toBytes=function(e,r){switch(Kt(e).code){case 4:return _t(r);case 41:return _t(r);case 6:case 273:case 33:case 132:return Le(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 777:return so(r);case 421:return io(r);case 444:return co(r);case 445:return ao(r);default:return Zt(r,"base16")}};function _t(t){if(!be.isIP(t))throw new Error("invalid ip address");return be.toBytes(t)}function ro(t){let e=be.toString(t);if(!e||!be.isIP(e))throw new Error("invalid ip address");return e}function Le(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function Yt(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function so(t){let e=Zt(t),r=Uint8Array.from(Q.encode(e.length));return ve([r,e],r.length+e.length)}function no(t){let e=Q.decode(t);if(t=t.slice(Q.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return ye(t)}function io(t){let e;t[0]==="Q"||t[0]==="1"?e=to.decode(eo.decode(`z${t}`)).bytes:e=_n.parse(t).multihash.bytes;let r=Uint8Array.from(Q.encode(e.length));return ve([r,e],r.length+e.length)}function oo(t){let e=Q.decode(t),r=t.slice(Q.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return ye(r,"base58btc")}function co(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");let r=Wt.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Le(n);return ve([r,o],r.length+o.length)}function ao(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");let r=Wt.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Le(n);return ve([r,o],r.length+o.length)}function Ht(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=ye(e,"base32"),o=Yt(r);return n+":"+o}});var hr=f((ss,tr)=>{"use strict";var rr=er(),ke=de(),ne=ge(),nr=Fe(),uo=Z();tr.exports={stringToStringTuples:or,stringTuplesToString:sr,tuplesToStringTuples:cr,stringTuplesToTuples:ir,bytesToTuples:Pe,tuplesToBytes:ar,bytesToString:lo,stringToBytes:ur,fromString:ho,fromBytes:lr,validateBytes:Ge,isValidBytes:fo,cleanPath:me,ParseError:Je,protoFromTuple:oe,sizeForAddr:dr};function or(t){let e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let o=r[n],s=ke(o);if(s.size===0){e.push([o]);continue}if(n++,n>=r.length)throw Je("invalid address: "+t);if(s.path){e.push([o,me(r.slice(n).join("/"))]);break}e.push([o,r[n]])}return e}function sr(t){let e=[];return t.map(r=>{let n=oe(r);return e.push(n.name),r.length>1&&e.push(r[1]),null}),me(e.join("/"))}function ir(t){return t.map(e=>{Array.isArray(e)||(e=[e]);let r=oe(e);return e.length>1?[r.code,rr.toBytes(r.code,e[1])]:[r.code]})}function cr(t){return t.map(e=>{let r=oe(e);return e[1]?[r.code,rr.toString(r.code,e[1])]:[r.code]})}function ar(t){return lr(nr(t.map(e=>{let r=oe(e),n=Uint8Array.from(ne.encode(r.code));return e.length>1&&(n=nr([n,e[1]])),n})))}function dr(t,e){return t.size>0?t.size/8:t.size===0?0:ne.decode(e)+ne.decode.bytes}function Pe(t){let e=[],r=0;for(;r<t.length;){let n=ne.decode(t,r),o=ne.decode.bytes,s=ke(n),i=dr(s,t.slice(r+o));if(i===0){e.push([n]),r+=o;continue}let a=t.slice(r+o,r+o+i);if(r+=i+o,r>t.length)throw Je("Invalid address Uint8Array: "+uo(t,"base16"));e.push([n,a])}return e}function lo(t){let e=Pe(t),r=cr(e);return sr(r)}function ur(t){t=me(t);let e=or(t),r=ir(e);return ar(r)}function ho(t){return ur(t)}function lr(t){let e=Ge(t);if(e)throw e;return Uint8Array.from(t)}function Ge(t){try{Pe(t)}catch(e){return e}}function fo(t){return Ge(t)===void 0}function me(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function Je(t){return new Error("Error parsing address: "+t)}function oe(t){return ke(t[0])}});var wr=f((is,fr)=>{"use strict";function pr(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function po(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return pr(t,r)}catch(n){r.message=t.message,r.stack=t.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(t)),pr(new o,r)}}fr.exports=po});var br=f((cs,gr)=>{"use strict";function wo(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}gr.exports=wo});var Eo=f((as,yr)=>{"use strict";var q=hr(),X=de(),vr=ge(),{CID:go}=(Oe(),Ne),{base58btc:bo}=(fe(),De),yo=wr(),vo=Symbol.for("nodejs.util.inspect.custom"),xe=Z(),mo=br(),Qe=new Map,mr=Symbol.for("@multiformats/js-multiaddr/multiaddr"),T=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,mr,{value:!0}),e instanceof Uint8Array)this.bytes=q.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=q.fromString(e)}else if(T.isMultiaddr(e))this.bytes=q.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return q.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let e={},r=this.toString().split("/");return e.family=r[1]==="ip4"?4:6,e.host=r[2],e.transport=r[3],e.port=parseInt(r[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},X(e)))}protoCodes(){let e=[],r=this.bytes,n=0;for(;n<r.length;){let o=vr.decode(r,n),s=vr.decode.bytes,i=X(o);n+=q.sizeForAddr(i,r.slice(n+s))+s,e.push(o)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return q.bytesToTuples(this.bytes)}stringTuples(){let e=q.bytesToTuples(this.bytes);return q.tuplesToStringTuples(e)}encapsulate(e){return e=new T(e),new T(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new T(n.slice(0,o))}decapsulateCode(e){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new T(q.tuplesToBytes(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===X.names.ipfs.code).pop();if(r&&r[1]){let n=r[1];return n[0]==="Q"||n[0]==="1"?xe(bo.decode(`z${n}`),"base58btc"):xe(go.parse(n).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>!!X(r[0]).path)[0][1],e||(e=null)}catch(r){e=null}return e}equals(e){return mo(this.bytes,e.bytes)}async resolve(){let e=this.protos().find(o=>o.resolvable);if(!e)return[this];let r=Qe.get(e.name);if(!r)throw yo(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this)).map(o=>new T(o))}nodeAddress(){let e=this.protoCodes(),r=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${r[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(n[2]!=="tcp"&&n[2]!=="udp")throw new Error(`no protocol with name: "'${r[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(e){let r=(e||this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}static fromNodeAddress(e,r){if(!e)throw new Error("requires node address object");if(!r)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new T("/"+[n,e.address,r,e.port].join("/"))}static isName(e){return T.isMultiaddr(e)?e.protos().some(r=>r.resolvable):!1}static isMultiaddr(e){return e instanceof T||Boolean(e&&e[mr])}[vo](){return"<Multiaddr "+xe(this.bytes,"base16")+" - "+q.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+xe(this.bytes,"base16")+" - "+q.bytesToString(this.bytes)+">"}};T.protocols=X;T.resolvers=Qe;function xo(t){return new T(t)}yr.exports={Multiaddr:T,multiaddr:xo,protocols:X,resolvers:Qe}});return Eo();})();
return Multiaddr}));
